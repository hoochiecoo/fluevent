plugins {
    id "com.android.application"
    id "org.jetbrains.kotlin.android"
    id "dev.flutter.flutter-gradle-plugin"
}
android {
    namespace "com.example.camera_starter"
    compileSdkVersion 34
    ndkVersion flutter.ndkVersion
    compileOptions {
        sourceCompatibility JavaVersion.VERSION_1_8
        targetCompatibility JavaVersion.VERSION_1_8
    }
    kotlinOptions { jvmTarget = '1.8' }
    sourceSets {
        main {
            java {
                srcDirs += 'src/main/kotlin'
                def opencvSrc = file('../../opencv/sdk/java/src')
                if (opencvSrc.exists()) {
                    println "Including OpenCV Java sources (excluding camera views) from: ${opencvSrc}"
                    srcDirs += opencvSrc.toString()
                    exclude 'org/opencv/android/CameraGLSurfaceView.java'
                    exclude 'org/opencv/android/CameraBridgeViewBase.java'
                    exclude 'org/opencv/android/JavaCameraView.java'
                    exclude 'org/opencv/android/NativeCameraView.java'
                }
            }
        }
    }
    defaultConfig {
        applicationId "com.example.camera_starter"
        minSdkVersion 24
        targetSdkVersion 34
        versionCode 1
        versionName "1.0"
    }
    packagingOptions {
        pickFirst 'lib/*/libc++_shared.so'
        pickFirst 'lib/*/libopencv_java4.so'
    }
}
dependencies {
   implementation "androidx.camera:camera-core:1.3.0"
   implementation "androidx.camera:camera-camera2:1.3.0"
   implementation "androidx.camera:camera-lifecycle:1.3.0"
   implementation "androidx.camera:camera-view:1.3.0"
   implementation 'androidx.concurrent:concurrent-futures-ktx:1.1.0'

}
